---
title: 'Design Core'
summary: 'Explain how to use @web-loom/design-core tokens, theme utilities, and CSS helpers across apps.'
topicTitle: 'Published Packages'
topicSlug: 'packages'
---

# Design Core

`@web-loom/design-core` is the token/stylesheet foundation for every Web Loom app. It exposes the canonical design tokens, CSS variable generators, and runtime theming helpers so you can keep colors, typography, spacing, and shadows consistent across frameworks (React, Vue, Angular, vanilla JS).

## Installation & quick start

```bash
npm install @web-loom/design-core
# or yarn add @web-loom/design-core
# or pnpm add @web-loom/design-core
```

You can import the generated CSS directly (`@web-loom/design-core/design-system` or the individual `src/css/...` files) or generate CSS variables at runtime via `generateCssVariablesString`/`generateCssVariablesMap`. Combine those utilities with `getTokenValue`, `pathToCssVar`, and `getTokenVar` when you need tokens inside JavaScript.

```ts
import { getTokenVar, generateCssVariablesString } from '@web-loom/design-core/utils';

const vars = await generateCssVariablesString(':root');
document.head.insertAdjacentHTML('beforeend', `<style>${vars}</style>`);
const borderColor = getTokenVar('colors.border.default');
```

## Token categories

The package ships tokens for:

- Colors (brand, background, semantic text, surfaces)
- Typography (fonts, sizes, line heights)
- Spacing & sizing (spacing, sizing, layout, icon sizes)
- Elevation (shadows, borders, radii)
- Opacity, transitions, breakpoints, gradients, z-index, focus rings, cursors, and more

Tokens can reference other tokens so you always derive derived values from the canonical source. Use `getAllTokens()` to inspect the resolved tree when you need to build helper functions or documentation pages.

## Runtime theming

`createTheme`, `applyTheme`, and `setTheme` drive light/dark/high contrast experiences:

1. Define overrides as partial tokens:

```ts
import { createTheme, applyTheme, setTheme } from '@web-loom/design-core/utils';

const darkTheme = createTheme('dark', {
  colors: {
    background: { page: '#050609', surface: '#0f1116' },
    text: { primary: '#f3f4f6' },
    brand: { primary: '#f6f7fb' },
  },
});
```

2. Apply each theme (async) before switching:

```ts
await applyTheme(darkTheme);
await applyTheme(lightTheme);
```

3. Use `setTheme('dark')` to toggle the `[data-theme="dark"]` selector. `setTheme` also remembers the last active theme so fallback logic is simple.

Call `applyTheme` early (server or client) so CSS variables exist before the first paint. The Task Flow UI and MVVM React providers load both light and dark themes before calling `setTheme`, while the docs app uses `next-themes` to manage the `class` attribute via `apps/docs/app/theme-provider.tsx`.

## JavaScript helpers

- `getTokenValue(path)` resolves a token value asynchronously.
- `pathToCssVar(path)` yields the CSS variable name (`--colors-brand-primary`).
- `getTokenVar(path)` returns the `var(...)` string for inline styles.
- `getSafeTokenVar(path)` guards against missing tokens and logs warnings.
- `generateCssVariablesMap()` returns a flat map of CSS var names to values when you need to apply them programmatically.

These helpers keep your JS styles aligned with the same tokens your CSS consumes.

## Interop with UI packages

- UI Core and UI Patterns already read CSS custom properties introduced by Design Core. Theme toggles simply call `setTheme` while relying on CSS to update component palettes.
- Store Core, Event Bus Core, and Query Core can store the active theme name or react to theme change events triggered by UI Patterns.
- For documentation or marketing sites, load `@web-loom/design-core/design-system` once per app and call `applyTheme` inside the provider so `setTheme` can freely switch between `[data-theme="light"]` and `[data-theme="dark"]` variants.

## Best practices

1. Inject CSS variables before rendering to avoid flashes of unstyled themes (apply the default tokens in a `<style>` tag or import the CSS files). 2. Keep theme overrides focused on the tokens you need to change (colors, surfaces, shadows) and fall back to the default tokens for everything else. 3. Persist the userâ€™s theme in local storage or URL parameters so `setTheme` restores the preferred mode on reload. 4. Use the same `applyTheme` + `setTheme` flow across apps so theme switching behaves identically.

Need more detail? The full README (`packages/design-core/README.md`) covers caching, CSS generation, and advanced theme composition scenarios.
